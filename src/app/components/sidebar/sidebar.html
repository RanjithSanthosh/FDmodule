<div
  class="md:hidden flex items-center bg-slate-900 p-4 text-white border-b border-white/5"
>
  <button
    (click)="toggleMobileMenu()"
    class="p-2 hover:bg-slate-800 rounded-lg transition-colors"
  >
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M4 6h16M4 12h16M4 18h16"
      />
    </svg>
  </button>
</div>

@if (isMobileMenuOpen) {
<div
  (click)="toggleMobileMenu()"
  class="fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity"
></div>
}

<div
  class="fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white shadow-xl border-r border-white/5 flex flex-col transition-transform duration-300 ease-in-out md:translate-x-0 md:static h-screen"
  [class.-translate-x-full]="!isMobileMenuOpen"
  [class.translate-x-0]="isMobileMenuOpen"
>
  <div
    class="p-6 flex items-center space-x-3 border-b border-white/5 bg-slate-900/50"
  >
    <div
      class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-500/30"
    >
      <svg
        class="w-6 h-6 text-white"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 10V3L4 14h7v7l9-11h-7z"
        />
      </svg>
    </div>
    <span
      class="text-xl font-bold bg-clip-text text-transparent bg-linear-to-r from-white to-slate-400"
    >
      AdminPanel
    </span>

    <button
      (click)="toggleMobileMenu()"
      class="md:hidden ml-auto text-slate-400 hover:text-white"
    >
      <svg
        class="w-5 h-5"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
  </div>

  <nav class="flex-1 overflow-y-auto py-6 px-3 space-y-1">
    <p
      class="px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"
    >
      Main Menu
    </p>

    @for (item of menuItems; track item.label) { @if (!item.children) {
    <a
      [routerLink]="item.route"
      (click)="isMobileMenuOpen = false"
      routerLinkActive="bg-indigo-600/10 text-indigo-400 border-r-2 border-indigo-500"
      #rla="routerLinkActive"
      class="flex items-center px-3 py-3 rounded-lg transition-all duration-200 group hover:bg-slate-800 text-slate-400 hover:text-white cursor-pointer"
    >
      <svg
        class="w-5 h-5 mr-3 transition-colors group-hover:text-indigo-400"
        [class.text-indigo-500]="rla.isActive"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          [attr.d]="item.icon"
        />
      </svg>
      <span class="font-medium">{{ item.label }}</span>
    </a>
    } @if (item.children) {
    <div>
      <button
        (click)="toggleSubmenu(item)"
        [class.text-white]="item.expanded"
        class="w-full flex items-center justify-between px-3 py-3 rounded-lg transition-all duration-200 group hover:bg-slate-800 text-slate-400 hover:text-white cursor-pointer"
      >
        <div class="flex items-center">
          <svg
            class="w-5 h-5 mr-3 transition-colors group-hover:text-indigo-400"
            [class.text-indigo-400]="item.expanded"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              [attr.d]="item.icon"
            />
          </svg>
          <span class="font-medium">{{ item.label }}</span>
        </div>
        <svg
          class="w-4 h-4 transition-transform duration-200 text-slate-500"
          [class.rotate-90]="item.expanded"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>

      @if (item.expanded) {
      <div class="mt-1 ml-4 pl-4 border-l border-white/10 space-y-1">
        @for (child of item.children; track child.label) {
        <a
          [routerLink]="child.route"
          (click)="isMobileMenuOpen = false"
          routerLinkActive="text-indigo-400 font-medium bg-slate-800/50"
          class="block px-3 py-2 text-sm rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors"
        >
          {{ child.label }}
        </a>
        }
      </div>
      }
    </div>
    } }
  </nav>

  <div
    class="flex flex-col p-4 border-t border-white/5 bg-slate-900/50 backdrop-blur-sm"
  >
    <button
      class="flex items-center w-full p-2 rounded-lg hover:bg-slate-800 transition-colors group"
    >
      <div
        class="w-8 h-8 rounded-full ring-2 ring-transparent group-hover:ring-indigo-500 transition-all bg-[#6366f1] flex items-center justify-center text-white text-xs font-bold"
      >
        AU
      </div>
      <div class="ml-3 text-left">
        <p class="text-sm font-medium text-white">Admin User</p>
        <p class="text-xs text-slate-400">admin&#64;example.com</p>
      </div>
    </button>
    <button
      class="p-2 text-white hover:text-white transition-colors relative bg-red-500 rounded-lg"
      routerLink="/"
      (click)="logout()"
    >
      Log out
    </button>
  </div>
</div>
